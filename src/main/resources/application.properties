# ----------------------------------------
#  MySQL Database Configuration
# ----------------------------------------

# JDBC URL pointing to your Dockerized MySQL container (use container name, not localhost)
spring.datasource.url=jdbc:mysql://localhost:3306/courses_db
spring.datasource.username=zeyad
spring.datasource.password=backend123

# MySQL JDBC driver
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Connection pool tuning (optional but recommended)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1800000

# ----------------------------------------
#  JPA / Hibernate Configuration
# ----------------------------------------

# Automatically update the schema based on entity definitions
spring.jpa.hibernate.ddl-auto=none

# Show SQL queries in the console (great for debugging)
spring.jpa.show-sql=true

# Use MySQL 8 dialect for compatibility
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Format SQL output for readability
spring.jpa.properties.hibernate.format_sql=true

# ----------------------------------------
#  SQL Initialization
# ----------------------------------------

# Always run schema/data SQL files if present in classpath
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql
spring.sql.init.data-locations=classpath:data.sql

# ----------------------------------------
#  Springdoc OpenAPI / Swagger Configuration
# ----------------------------------------

# Enable OpenAPI spec generation
springdoc.api-docs.enabled=true
springdoc.api-docs.path=/v3/api-docs

# Enable Swagger UI for interactive API docs
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html

# Default media type for API responses
springdoc.default-produces-media-type=application/json

# ----------------------------------------
#  Logging Configuration
# ----------------------------------------

# Enable debug logging for Springdoc
logging.level.org.springdoc=DEBUG

# Enable debug logging for Spring Web layer
logging.level.org.springframework.web=DEBUG

# Enable debug logging for JDBC template (SQL execution)
logging.level.org.springframework.jdbc.core.JdbcTemplate=DEBUG

# Enable debug logging for Hibernate SQL
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ----------------------------------------
#  Optional: Disable Spring Boot Admin
# ----------------------------------------
spring.jpa.defer-datasource-initialization=true

spring.application.admin.enabled=false

# ----------------------------------------
#  H2 (Commented Out)
# ----------------------------------------
# spring.datasource.url=jdbc:h2:mem:testdb
# spring.datasource.driver-class-name=org.h2.Driver
# spring.datasource.username=sa
# spring.datasource.password=
# spring.h2.console.enabled=true
# spring.h2.console.path=/h2-console
